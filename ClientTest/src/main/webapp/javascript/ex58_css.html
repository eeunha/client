<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 150px;
        height: 150px;
        background-color: gold;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <!-- ex58_css.html -->

    <div id="box1" class="box"></div>

    <script>
      const box1 = document.getElementById("box1");
      let isDown = false;

      let x = 0;
      let y = 0;

      window.onmousedown = () => {
        if (event.target.id == "box1" && isValid(event)) {
          isDown = true;
          box1.style.opacity = 0.3; // ghost image
        }
      };

      window.onmousemove = () => {
        if (isDown) {
          box1.style.width = event.clientX + "px";
          box1.style.height = event.clientY + "px";
        }
      };

      window.onmouseup = () => {
        isDown = false;
        box1.style.opacity = 1;
      };

      function isValid(event) {
        //마우스가 상자의 우측 하단부를 눌렀는지?
        // 현재 상자의 크기?
        let w = parseInt(window.getComputedStyle(box1).width);
        let h = parseInt(window.getComputedStyle(box1).height);
        if (
          event.offsetX >= w - 10 &&
          event.offsetX <= w &&
          event.offsetY >= h - 10 &&
          event.offsetY <= h
        ) {
          return true;
        }
        return false;
      }
    </script>
  </body>
</html>
